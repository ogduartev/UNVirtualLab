<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>UNVirtualLab: Referencia de la Clase XMLThing</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">UNVirtualLab
   
   </div>
   <div id="projectbrief">Laboratorio virtual de sistemas dinámicos</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generado por Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Buscar');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Página&#160;principal</span></a></li>
      <li class="current"><a href="annotated.html"><span>Clases</span></a></li>
      <li><a href="files.html"><span>Archivos</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Buscar" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Lista&#160;de&#160;clases</span></a></li>
      <li><a href="classes.html"><span>Índice&#160;de&#160;clases</span></a></li>
      <li><a href="hierarchy.html"><span>Jerarquía&#160;de&#160;la&#160;clase</span></a></li>
      <li><a href="functions.html"><span>Miembros&#160;de&#160;las&#160;clases</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Métodos públicos</a> &#124;
<a href="#pub-attribs">Atributos públicos</a>  </div>
  <div class="headertitle">
<div class="title">Referencia de la Clase XMLThing</div>  </div>
</div><!--header-->
<div class="contents">
<!-- doxytag: class="XMLThing" -->
<p><a href="classXMLThing-members.html">Lista de todos los miembros.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Métodos públicos</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXMLThing.html#a1c153caf15cb3b1a2159d5e879a3f6ca">XMLThing</a> ($xml=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXMLThing.html#a8d408058141c8a030b433b2deb822baf">parse</a> ($xml=NULL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXMLThing.html#ae18a74c5d5979c699b42b1f9a8fedbba">parse_recurse</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXMLThing.html#aa5d425088bd74ca4f3f9c1a9bc9ac453">parse_init</a> ()</td></tr>
<tr><td colspan="2"><h2><a name="pub-attribs"></a>
Atributos públicos</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a07538f3f144881632ffd11d3699e5562"></a><!-- doxytag: member="XMLThing::$rawXML" ref="a07538f3f144881632ffd11d3699e5562" args="" -->
&#160;</td><td class="memItemRight" valign="bottom"><b>$rawXML</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0c4f39e54503d71299dc274d787dd0f3"></a><!-- doxytag: member="XMLThing::$valueArray" ref="a0c4f39e54503d71299dc274d787dd0f3" args="" -->
&#160;</td><td class="memItemRight" valign="bottom"><b>$valueArray</b> = array()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a49615464bf3ef0a0ef606179ff55afc1"></a><!-- doxytag: member="XMLThing::$keyArray" ref="a49615464bf3ef0a0ef606179ff55afc1" args="" -->
&#160;</td><td class="memItemRight" valign="bottom"><b>$keyArray</b> = array()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0f4ddacd5ff9a4dabcbddc39aa47f9c5"></a><!-- doxytag: member="XMLThing::$parsed" ref="a0f4ddacd5ff9a4dabcbddc39aa47f9c5" args="" -->
&#160;</td><td class="memItemRight" valign="bottom"><b>$parsed</b> = array()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9165f7eec1b7840c6076b294ef497f68"></a><!-- doxytag: member="XMLThing::$index" ref="a9165f7eec1b7840c6076b294ef497f68" args="" -->
&#160;</td><td class="memItemRight" valign="bottom"><b>$index</b> = 0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a658a4bd3bff6ade05283ad48aec5379b"></a><!-- doxytag: member="XMLThing::$attribKey" ref="a658a4bd3bff6ade05283ad48aec5379b" args="" -->
&#160;</td><td class="memItemRight" valign="bottom"><b>$attribKey</b> = 'attributes'</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9948e8517f8b349298a20d9286a3b2b7"></a><!-- doxytag: member="XMLThing::$valueKey" ref="a9948e8517f8b349298a20d9286a3b2b7" args="" -->
&#160;</td><td class="memItemRight" valign="bottom"><b>$valueKey</b> = 'value'</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a445699d05b90f941d5b09ad3331da61a"></a><!-- doxytag: member="XMLThing::$cdataKey" ref="a445699d05b90f941d5b09ad3331da61a" args="" -->
&#160;</td><td class="memItemRight" valign="bottom"><b>$cdataKey</b> = 'cdata'</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4d29070c404490ab9ef64c44485fb330"></a><!-- doxytag: member="XMLThing::$isError" ref="a4d29070c404490ab9ef64c44485fb330" args="" -->
&#160;</td><td class="memItemRight" valign="bottom"><b>$isError</b> = false</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afd5fee61b2486f3c5f03b0da62f69b62"></a><!-- doxytag: member="XMLThing::$error" ref="afd5fee61b2486f3c5f03b0da62f69b62" args="" -->
&#160;</td><td class="memItemRight" valign="bottom"><b>$error</b> = ''</td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Descripción detallada</h2>
<div class="textblock"><dl class="author"><dt><b>Autor:</b></dt><dd>wickedfather at hotmail.com</dd></dl>
<p>PHP4 and PHP5 compatible</p>
<p>14th Apr cdataKey index for open tags fixed Class to parse xml into an array the way I like it.</p>
<dl class="author"><dt><b>Autor:</b></dt><dd>wickedfather at hotmail.com </dd></dl>
<dl class="version"><dt><b>Versión:</b></dt><dd>0.0.2 </dd></dl>

<p>Definición en la línea <a class="el" href="xmlthing_8class_8php_source.html#l00017">17</a> del archivo <a class="el" href="xmlthing_8class_8php_source.html">xmlthing.class.php</a>.</p>
</div><hr/><h2>Documentación de las funciones miembro</h2>
<a class="anchor" id="a8d408058141c8a030b433b2deb822baf"></a><!-- doxytag: member="XMLThing::parse" ref="a8d408058141c8a030b433b2deb822baf" args="($xml=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classXMLThing.html#a8d408058141c8a030b433b2deb822baf">XMLThing::parse</a> </td>
          <td>(</td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>xml</em> = <code>NULL</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Turns xml into a lovely array </p>
<dl class="params"><dt><b>Parámetros:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">string</td><td>option xml to parse. That supplied to constructor used otherwise. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Devuelve:</b></dt><dd>array parsed data </dd></dl>

<p>Definición en la línea <a class="el" href="xmlthing_8class_8php_source.html#l00061">61</a> del archivo <a class="el" href="xmlthing_8class_8php_source.html">xmlthing.class.php</a>.</p>
<div class="fragment"><pre class="fragment">        {
                <span class="keywordflow">if</span> (!is_null($xml))
                {
                        $this-&gt;rawXML = $xml;
                }

                $this-&gt;isError = <span class="keyword">false</span>;
                        <span class="comment">// setup</span>
                <span class="keywordflow">if</span> (!$this-&gt;<a class="code" href="classXMLThing.html#aa5d425088bd74ca4f3f9c1a9bc9ac453">parse_init</a>())
                {
                        <span class="keywordflow">return</span> <span class="keyword">false</span>;
                }

                $this-&gt;index = 0;
                $this-&gt;parsed = $this-&gt;<a class="code" href="classXMLThing.html#ae18a74c5d5979c699b42b1f9a8fedbba">parse_recurse</a>();
                $this-&gt;status = <span class="stringliteral">&#39;parsing complete&#39;</span>;

                <span class="keywordflow">return</span> $this-&gt;parsed;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="aa5d425088bd74ca4f3f9c1a9bc9ac453"></a><!-- doxytag: member="XMLThing::parse_init" ref="aa5d425088bd74ca4f3f9c1a9bc9ac453" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classXMLThing.html#aa5d425088bd74ca4f3f9c1a9bc9ac453">XMLThing::parse_init</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Turns the xml into the array pairs with xml_parse_into_struct </p>
<dl class="return"><dt><b>Devuelve:</b></dt><dd>bool </dd></dl>

<p>Definición en la línea <a class="el" href="xmlthing_8class_8php_source.html#l00186">186</a> del archivo <a class="el" href="xmlthing_8class_8php_source.html">xmlthing.class.php</a>.</p>
<div class="fragment"><pre class="fragment">        {
        $this-&gt;parser = xml_parser_create();

        $parser = $this-&gt;parser;
        xml_parser_set_option($parser, XML_OPTION_CASE_FOLDING, 0);     <span class="comment">// Dont mess with my cAsE sEtTings</span>
        xml_parser_set_option($parser, XML_OPTION_SKIP_WHITE, 1);               <span class="comment">// Dont bother with empty info</span>
        <span class="keywordflow">if</span> (!$res = (<span class="keywordtype">bool</span>)xml_parse_into_struct($parser, $this-&gt;rawXML, $this-&gt;valueArray, $this-&gt;keyArray))
                {
                        $this-&gt;isError = <span class="keyword">true</span>;
            $this-&gt;error = <span class="stringliteral">&#39;error: &#39;</span>.xml_error_string(xml_get_error_code($parser)).<span class="stringliteral">&#39; at line &#39;</span>.xml_get_current_line_number($parser);
        }
        xml_parser_free($parser);

                <span class="keywordflow">return</span> $res;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="ae18a74c5d5979c699b42b1f9a8fedbba"></a><!-- doxytag: member="XMLThing::parse_recurse" ref="ae18a74c5d5979c699b42b1f9a8fedbba" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classXMLThing.html#ae18a74c5d5979c699b42b1f9a8fedbba">XMLThing::parse_recurse</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Turns the struct array into a nested one </p>
<dl class="return"><dt><b>Devuelve:</b></dt><dd>array </dd></dl>

<p>Definición en la línea <a class="el" href="xmlthing_8class_8php_source.html#l00088">88</a> del archivo <a class="el" href="xmlthing_8class_8php_source.html">xmlthing.class.php</a>.</p>
<div class="fragment"><pre class="fragment">        {               <span class="comment">// data found at this level</span>
                $found = array();
                        <span class="comment">// count of the number of times a tag has been found at this level</span>
                $tagCount = array();

                        <span class="comment">// loop through the tags - I use a lazy referencing thing for where data should go</span>

                <span class="keywordflow">while</span> (isset($this-&gt;valueArray[$this-&gt;index]))
                {
                        $tag = $this-&gt;valueArray[$this-&gt;index];
                        $this-&gt;index++;

                                <span class="comment">// if it&#39;s a close then return straight away</span>

                        <span class="keywordflow">if</span> ($tag[<span class="stringliteral">&#39;type&#39;</span>] == <span class="stringliteral">&#39;close&#39;</span>)
                        {
                                <span class="keywordflow">return</span> $found;
                        }
                                <span class="comment">// if it&#39;s cdata translate it as a complete tag named $this-&gt;cdataKey</span>
                        <span class="keywordflow">if</span> ($tag[<span class="stringliteral">&#39;type&#39;</span>] == <span class="stringliteral">&#39;cdata&#39;</span>)
                        {
                                $tag[<span class="stringliteral">&#39;tag&#39;</span>] = $this-&gt;cdataKey;
                                $tag[<span class="stringliteral">&#39;type&#39;</span>] = <span class="stringliteral">&#39;complete&#39;</span>;
                        }

                        $tagName = $tag[<span class="stringliteral">&#39;tag&#39;</span>];

                                <span class="comment">// this bit below creates a reference to where the data should be going, </span>
                                <span class="comment">// it saves on some conditions in the switch, but it probably annoyingly obfuscating</span>
                                <span class="comment">// has this tag already appeared at this level ?  If so we need mods</span>

                        <span class="keywordflow">if</span> (isset($tagCount[$tagName]))
                        {               <span class="comment">// transform to an array IF only one of the tags been before</span>
                                <span class="keywordflow">if</span> ($tagCount[$tagName] == 1)
                                {
                                        $found[$tagName] = array($found[$tagName]);
                                }
                                        <span class="comment">//$found[$tagName][$tagCount[$tagName]] = &#39;&#39;;   // doesn&#39;t need to happen, the reference below is enough</span>
                                $tagRef =&amp; $found[$tagName][$tagCount[$tagName]];
                                $tagCount[$tagName]++;
                        }
                        <span class="keywordflow">else</span>    <span class="comment">// just use the variable</span>
                        {
                                $tagCount[$tagName] = 1;
                                $tagRef =&amp; $found[$tagName];
                        }

                                <span class="comment">// now do the work</span>

                        <span class="keywordflow">switch</span> ($tag[<span class="stringliteral">&#39;type&#39;</span>])
                        {
                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;open&#39;</span>:
                                        $tagRef = $this-&gt;<a class="code" href="classXMLThing.html#ae18a74c5d5979c699b42b1f9a8fedbba">parse_recurse</a>();

                                        <span class="keywordflow">if</span> (isset($tag[<span class="stringliteral">&#39;attributes&#39;</span>]))
                                        {
                                                $tagRef[$this-&gt;attribKey] = $tag[<span class="stringliteral">&#39;attributes&#39;</span>];
                                        }
                                                <span class="comment">// open CAN have a value - it makes sense to include it as cdata</span>
                                        <span class="keywordflow">if</span> (isset($tag[<span class="stringliteral">&#39;value&#39;</span>]))
                                        {
                                                <span class="keywordflow">if</span> (isset($tagRef[$this-&gt;cdataKey]))    <span class="comment">// push it to the start of the cdata array if it&#39;s present</span>
                                                {
                                                        $tagRef[$this-&gt;cdataKey] = (array)$tagRef[$this-&gt;cdataKey];     <span class="comment">// &lt;-- needed for php5 compatibility];</span>
                                                        array_unshift($tagRef[$this-&gt;cdataKey], $tag[<span class="stringliteral">&#39;value&#39;</span>]);
                                                }
                                                <span class="keywordflow">else</span>
                                                {
                                                        $tagRef[$this-&gt;cdataKey] = $tag[<span class="stringliteral">&#39;value&#39;</span>];
                                                }
                                        }
                                        <span class="keywordflow">break</span>;

                                <span class="keywordflow">case</span> <span class="stringliteral">&#39;complete&#39;</span>:
                                        <span class="keywordflow">if</span> (isset($tag[<span class="stringliteral">&#39;attributes&#39;</span>]))
                                        {
                                                $tagRef[$this-&gt;attribKey] = $tag[<span class="stringliteral">&#39;attributes&#39;</span>];
                                                $tagRef =&amp; $tagRef[$this-&gt;valueKey];
                                        }

                                        <span class="keywordflow">if</span> (isset($tag[<span class="stringliteral">&#39;value&#39;</span>]))
                                        {
                                                $tagRef = $tag[<span class="stringliteral">&#39;value&#39;</span>];
                                        }
                                        <span class="keywordflow">break</span>;
                        }                       
                }

                <span class="keywordflow">return</span> $found;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a1c153caf15cb3b1a2159d5e879a3f6ca"></a><!-- doxytag: member="XMLThing::XMLThing" ref="a1c153caf15cb3b1a2159d5e879a3f6ca" args="($xml=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classXMLThing.html#a1c153caf15cb3b1a2159d5e879a3f6ca">XMLThing::XMLThing</a> </td>
          <td>(</td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>xml</em> = <code>NULL</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Constructor </p>
<dl class="params"><dt><b>Parámetros:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">string</td><td>xml data to parse - optional </td></tr>
  </table>
  </dd>
</dl>

<p>Definición en la línea <a class="el" href="xmlthing_8class_8php_source.html#l00049">49</a> del archivo <a class="el" href="xmlthing_8class_8php_source.html">xmlthing.class.php</a>.</p>
<div class="fragment"><pre class="fragment">        {
        $this-&gt;rawXML = $xml;
    }
</pre></div>
</div>
</div>
<hr/>La documentación para esta clase fue generada a partir del siguiente fichero:<ul>
<li><a class="el" href="xmlthing_8class_8php_source.html">xmlthing.class.php</a></li>
</ul>
</div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>Todo</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Clases</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Funciones</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generado el Sábado, 8 de Febrero de 2014 08:30:52 para UNVirtualLab por &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
