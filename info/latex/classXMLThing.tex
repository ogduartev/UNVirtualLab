\hypertarget{classXMLThing}{}\section{Referencia de la Clase X\+M\+L\+Thing}
\label{classXMLThing}\index{X\+M\+L\+Thing@{X\+M\+L\+Thing}}
\subsection*{Métodos públicos}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classXMLThing_a1c153caf15cb3b1a2159d5e879a3f6ca}{X\+M\+L\+Thing} (\$xml=N\+U\+LL)
\item 
\hyperlink{classXMLThing_a8d408058141c8a030b433b2deb822baf}{parse} (\$xml=N\+U\+LL)
\item 
\hyperlink{classXMLThing_ae18a74c5d5979c699b42b1f9a8fedbba}{parse\+\_\+recurse} ()
\item 
\hyperlink{classXMLThing_aa5d425088bd74ca4f3f9c1a9bc9ac453}{parse\+\_\+init} ()
\end{DoxyCompactItemize}
\subsection*{Atributos públicos}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classXMLThing_a07538f3f144881632ffd11d3699e5562}\label{classXMLThing_a07538f3f144881632ffd11d3699e5562}} 
{\bfseries \$raw\+X\+ML}
\item 
\mbox{\Hypertarget{classXMLThing_a0c4f39e54503d71299dc274d787dd0f3}\label{classXMLThing_a0c4f39e54503d71299dc274d787dd0f3}} 
{\bfseries \$value\+Array} = array()
\item 
\mbox{\Hypertarget{classXMLThing_a49615464bf3ef0a0ef606179ff55afc1}\label{classXMLThing_a49615464bf3ef0a0ef606179ff55afc1}} 
{\bfseries \$key\+Array} = array()
\item 
\mbox{\Hypertarget{classXMLThing_a0f4ddacd5ff9a4dabcbddc39aa47f9c5}\label{classXMLThing_a0f4ddacd5ff9a4dabcbddc39aa47f9c5}} 
{\bfseries \$parsed} = array()
\item 
\mbox{\Hypertarget{classXMLThing_a9165f7eec1b7840c6076b294ef497f68}\label{classXMLThing_a9165f7eec1b7840c6076b294ef497f68}} 
{\bfseries \$index} = 0
\item 
\mbox{\Hypertarget{classXMLThing_a658a4bd3bff6ade05283ad48aec5379b}\label{classXMLThing_a658a4bd3bff6ade05283ad48aec5379b}} 
{\bfseries \$attrib\+Key} = \textquotesingle{}attributes\textquotesingle{}
\item 
\mbox{\Hypertarget{classXMLThing_a9948e8517f8b349298a20d9286a3b2b7}\label{classXMLThing_a9948e8517f8b349298a20d9286a3b2b7}} 
{\bfseries \$value\+Key} = \textquotesingle{}value\textquotesingle{}
\item 
\mbox{\Hypertarget{classXMLThing_a445699d05b90f941d5b09ad3331da61a}\label{classXMLThing_a445699d05b90f941d5b09ad3331da61a}} 
{\bfseries \$cdata\+Key} = \textquotesingle{}cdata\textquotesingle{}
\item 
\mbox{\Hypertarget{classXMLThing_a4d29070c404490ab9ef64c44485fb330}\label{classXMLThing_a4d29070c404490ab9ef64c44485fb330}} 
{\bfseries \$is\+Error} = false
\item 
\mbox{\Hypertarget{classXMLThing_afd5fee61b2486f3c5f03b0da62f69b62}\label{classXMLThing_afd5fee61b2486f3c5f03b0da62f69b62}} 
{\bfseries \$error} = \textquotesingle{}\textquotesingle{}
\end{DoxyCompactItemize}


\subsection{Descripción detallada}
\begin{DoxyAuthor}{Autor}
wickedfather at hotmail.\+com
\end{DoxyAuthor}
P\+H\+P4 and P\+H\+P5 compatible

14th Apr cdata\+Key index for open tags fixed Class to parse xml into an array the way I like it.

\begin{DoxyAuthor}{Autor}
wickedfather at hotmail.\+com 
\end{DoxyAuthor}
\begin{DoxyVersion}{Versión}
0.\+0.\+2 
\end{DoxyVersion}


Definición en la línea 17 del archivo xmlthing.\+class.\+php.



\subsection{Documentación de las funciones miembro}
\mbox{\Hypertarget{classXMLThing_a8d408058141c8a030b433b2deb822baf}\label{classXMLThing_a8d408058141c8a030b433b2deb822baf}} 
\index{X\+M\+L\+Thing@{X\+M\+L\+Thing}!parse@{parse}}
\index{parse@{parse}!X\+M\+L\+Thing@{X\+M\+L\+Thing}}
\subsubsection{\texorpdfstring{parse()}{parse()}}
{\footnotesize\ttfamily X\+M\+L\+Thing\+::parse (\begin{DoxyParamCaption}\item[{}]{\$xml = {\ttfamily NULL} }\end{DoxyParamCaption})}

Turns xml into a lovely array 
\begin{DoxyParams}{Parámetros}
{\em string} & option xml to parse. That supplied to constructor used otherwise. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Devuelve}
array parsed data 
\end{DoxyReturn}


Definición en la línea 61 del archivo xmlthing.\+class.\+php.


\begin{DoxyCode}
62         \{
63                 \textcolor{keywordflow}{if} (!is\_null($xml))
64                 \{
65                         $this->rawXML = $xml;
66                 \}
67 
68                 $this->isError = \textcolor{keyword}{false};
69                         \textcolor{comment}{// setup}
70                 \textcolor{keywordflow}{if} (!$this->\hyperlink{classXMLThing_aa5d425088bd74ca4f3f9c1a9bc9ac453}{parse\_init}())
71                 \{
72                         \textcolor{keywordflow}{return} \textcolor{keyword}{false};
73                 \}
74 
75                 $this->index = 0;
76                 $this->parsed = $this->\hyperlink{classXMLThing_ae18a74c5d5979c699b42b1f9a8fedbba}{parse\_recurse}();
77                 $this->status = \textcolor{stringliteral}{'parsing complete'};
78 
79                 \textcolor{keywordflow}{return} $this->parsed;
80         \}
\end{DoxyCode}
\mbox{\Hypertarget{classXMLThing_aa5d425088bd74ca4f3f9c1a9bc9ac453}\label{classXMLThing_aa5d425088bd74ca4f3f9c1a9bc9ac453}} 
\index{X\+M\+L\+Thing@{X\+M\+L\+Thing}!parse\+\_\+init@{parse\+\_\+init}}
\index{parse\+\_\+init@{parse\+\_\+init}!X\+M\+L\+Thing@{X\+M\+L\+Thing}}
\subsubsection{\texorpdfstring{parse\+\_\+init()}{parse\_init()}}
{\footnotesize\ttfamily X\+M\+L\+Thing\+::parse\+\_\+init (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Turns the xml into the array pairs with xml\+\_\+parse\+\_\+into\+\_\+struct \begin{DoxyReturn}{Devuelve}
bool 
\end{DoxyReturn}


Definición en la línea 186 del archivo xmlthing.\+class.\+php.


\begin{DoxyCode}
187         \{
188         $this->parser = xml\_parser\_create();
189 
190         $parser = $this->parser;
191         xml\_parser\_set\_option($parser, XML\_OPTION\_CASE\_FOLDING, 0);     \textcolor{comment}{// Dont mess with my cAsE sEtTings}
192         xml\_parser\_set\_option($parser, XML\_OPTION\_SKIP\_WHITE, 1);               \textcolor{comment}{// Dont bother with empty
       info}
193         \textcolor{keywordflow}{if} (!$res = (\textcolor{keywordtype}{bool})xml\_parse\_into\_struct($parser, $this->rawXML, $this->valueArray, $this->keyArray)
      )
194                 \{
195                         $this->isError = \textcolor{keyword}{true};
196             $this->error = \textcolor{stringliteral}{'error: '}.xml\_error\_string(xml\_get\_error\_code($parser)).\textcolor{stringliteral}{' at line '}.
      xml\_get\_current\_line\_number($parser);
197         \}
198         xml\_parser\_free($parser);
199 
200                 \textcolor{keywordflow}{return} $res;
201         \}
\end{DoxyCode}
\mbox{\Hypertarget{classXMLThing_ae18a74c5d5979c699b42b1f9a8fedbba}\label{classXMLThing_ae18a74c5d5979c699b42b1f9a8fedbba}} 
\index{X\+M\+L\+Thing@{X\+M\+L\+Thing}!parse\+\_\+recurse@{parse\+\_\+recurse}}
\index{parse\+\_\+recurse@{parse\+\_\+recurse}!X\+M\+L\+Thing@{X\+M\+L\+Thing}}
\subsubsection{\texorpdfstring{parse\+\_\+recurse()}{parse\_recurse()}}
{\footnotesize\ttfamily X\+M\+L\+Thing\+::parse\+\_\+recurse (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Turns the struct array into a nested one \begin{DoxyReturn}{Devuelve}
array 
\end{DoxyReturn}


Definición en la línea 88 del archivo xmlthing.\+class.\+php.


\begin{DoxyCode}
89         \{               \textcolor{comment}{// data found at this level}
90                 $found = array();
91                         \textcolor{comment}{// count of the number of times a tag has been found at this level}
92                 $tagCount = array();
93 
94                         \textcolor{comment}{// loop through the tags - I use a lazy referencing thing for where data should go}
95 
96                 \textcolor{keywordflow}{while} (isset($this->valueArray[$this->index]))
97                 \{
98                         $tag = $this->valueArray[$this->index];
99                         $this->index++;
100 
101                                 \textcolor{comment}{// if it's a close then return straight away}
102 
103                         \textcolor{keywordflow}{if} ($tag[\textcolor{stringliteral}{'type'}] == \textcolor{stringliteral}{'close'})
104                         \{
105                                 \textcolor{keywordflow}{return} $found;
106                         \}
107                                 \textcolor{comment}{// if it's cdata translate it as a complete tag named $this->cdataKey}
108                         \textcolor{keywordflow}{if} ($tag[\textcolor{stringliteral}{'type'}] == \textcolor{stringliteral}{'cdata'})
109                         \{
110                                 $tag[\textcolor{stringliteral}{'tag'}] = $this->cdataKey;
111                                 $tag[\textcolor{stringliteral}{'type'}] = \textcolor{stringliteral}{'complete'};
112                         \}
113 
114                         $tagName = $tag[\textcolor{stringliteral}{'tag'}];
115 
116                                 \textcolor{comment}{// this bit below creates a reference to where the data should be going, }
117                                 \textcolor{comment}{// it saves on some conditions in the switch, but it probably annoyingly
       obfuscating}
118                                 \textcolor{comment}{// has this tag already appeared at this level ?  If so we need mods}
119 
120                         \textcolor{keywordflow}{if} (isset($tagCount[$tagName]))
121                         \{               \textcolor{comment}{// transform to an array IF only one of the tags been before}
122                                 \textcolor{keywordflow}{if} ($tagCount[$tagName] == 1)
123                                 \{
124                                         $found[$tagName] = array($found[$tagName]);
125                                 \}
126                                         \textcolor{comment}{//$found[$tagName][$tagCount[$tagName]] = '';   // doesn't need to
       happen, the reference below is enough}
127                                 $tagRef =& $found[$tagName][$tagCount[$tagName]];
128                                 $tagCount[$tagName]++;
129                         \}
130                         \textcolor{keywordflow}{else}    \textcolor{comment}{// just use the variable}
131                         \{
132                                 $tagCount[$tagName] = 1;
133                                 $tagRef =& $found[$tagName];
134                         \}
135 
136                                 \textcolor{comment}{// now do the work}
137 
138                         \textcolor{keywordflow}{switch} ($tag[\textcolor{stringliteral}{'type'}])
139                         \{
140                                 \textcolor{keywordflow}{case} \textcolor{stringliteral}{'open'}:
141                                         $tagRef = $this->\hyperlink{classXMLThing_ae18a74c5d5979c699b42b1f9a8fedbba}{parse\_recurse}();
142 
143                                         \textcolor{keywordflow}{if} (isset($tag[\textcolor{stringliteral}{'attributes'}]))
144                                         \{
145                                                 $tagRef[$this->attribKey] = $tag[\textcolor{stringliteral}{'attributes'}];
146                                         \}
147                                                 \textcolor{comment}{// open CAN have a value - it makes sense to include it as
       cdata}
148                                         \textcolor{keywordflow}{if} (isset($tag[\textcolor{stringliteral}{'value'}]))
149                                         \{
150                                                 \textcolor{keywordflow}{if} (isset($tagRef[$this->cdataKey]))    \textcolor{comment}{// push it to the
       start of the cdata array if it's present}
151                                                 \{
152                                                         $tagRef[$this->cdataKey] = (array)$tagRef[$this->
      cdataKey]; \textcolor{comment}{// <-- needed for php5 compatibility];}
153                                                         array\_unshift($tagRef[$this->cdataKey], $tag[\textcolor{stringliteral}{'value
      '}]);
154                                                 \}
155                                                 \textcolor{keywordflow}{else}
156                                                 \{
157                                                         $tagRef[$this->cdataKey] = $tag[\textcolor{stringliteral}{'value'}];
158                                                 \}
159                                         \}
160                                         \textcolor{keywordflow}{break};
161 
162                                 \textcolor{keywordflow}{case} \textcolor{stringliteral}{'complete'}:
163                                         \textcolor{keywordflow}{if} (isset($tag[\textcolor{stringliteral}{'attributes'}]))
164                                         \{
165                                                 $tagRef[$this->attribKey] = $tag[\textcolor{stringliteral}{'attributes'}];
166                                                 $tagRef =& $tagRef[$this->valueKey];
167                                         \}
168 
169                                         \textcolor{keywordflow}{if} (isset($tag[\textcolor{stringliteral}{'value'}]))
170                                         \{
171                                                 $tagRef = $tag[\textcolor{stringliteral}{'value'}];
172                                         \}
173                                         \textcolor{keywordflow}{break};
174                         \}                       
175                 \}
176 
177                 \textcolor{keywordflow}{return} $found;
178         \}
\end{DoxyCode}
\mbox{\Hypertarget{classXMLThing_a1c153caf15cb3b1a2159d5e879a3f6ca}\label{classXMLThing_a1c153caf15cb3b1a2159d5e879a3f6ca}} 
\index{X\+M\+L\+Thing@{X\+M\+L\+Thing}!X\+M\+L\+Thing@{X\+M\+L\+Thing}}
\index{X\+M\+L\+Thing@{X\+M\+L\+Thing}!X\+M\+L\+Thing@{X\+M\+L\+Thing}}
\subsubsection{\texorpdfstring{X\+M\+L\+Thing()}{XMLThing()}}
{\footnotesize\ttfamily X\+M\+L\+Thing\+::\+X\+M\+L\+Thing (\begin{DoxyParamCaption}\item[{}]{\$xml = {\ttfamily NULL} }\end{DoxyParamCaption})}

Constructor 
\begin{DoxyParams}{Parámetros}
{\em string} & xml data to parse -\/ optional \\
\hline
\end{DoxyParams}


Definición en la línea 49 del archivo xmlthing.\+class.\+php.


\begin{DoxyCode}
50         \{
51         $this->rawXML = $xml;
52     \}
\end{DoxyCode}


La documentación para esta clase fue generada a partir del siguiente fichero\+:\begin{DoxyCompactItemize}
\item 
/home/ogduartev/public\+\_\+html/unvl-\/\+Git\+Hub/\+U\+N\+Virtual\+Lab/xmlthing.\+class.\+php\end{DoxyCompactItemize}
